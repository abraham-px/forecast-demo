services:
  weather-ingest:
    build:
      context: .
      dockerfile: dockerfile.weather
    container_name: epc1522-weather
    env_file:
      - .env
    environment:
      SCHEDULER_JOBS: weather_ingest
      SCHEDULER_POLL_SECONDS: "60"
    restart: unless-stopped
    command: ["python", "app/scheduler.py"]

  forecast-agents:
    build:
      context: .
      dockerfile: dockerfile.forecast
    container_name: epc1522-forecast
    env_file:
      - .env
    volumes:
      - ./model:/app/model
    environment:
      SCHEDULER_JOBS: load_forecast,pv_simulation,evaluation
      SCHEDULER_POLL_SECONDS: "60"
    restart: unless-stopped
    command: ["python", "app/scheduler.py"]
